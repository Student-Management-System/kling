<div class="problem-list-container">
	<mat-card-title class="title-container">
		<span>{{ "Domain.Problems" | translate }}</span>
		<a [routerLink]="['/problem-editor/create']">
			<button mat-flat-button color="accent">{{ "Title.CreateProblem" | translate }}</button>
		</a>
	</mat-card-title>

	<div class="problem-list">
		<div class="filter">
			<mat-form-field>
				<mat-label>{{ "Common.Title" | translate }}</mat-label>
				<input
					matInput
					[(ngModel)]="filter.title"
					(keyup)="titleFilterChangedSubject.next()"
				/>
			</mat-form-field>

			<mat-form-field>
				<mat-label>Status</mat-label>
				<mat-select [(ngModel)]="filter.status" (ngModelChange)="filterSubject.next()">
					<mat-option [value]="undefined">-</mat-option>
					<mat-option [value]="statusEnum.UNSOLVED">{{
						"Enum.Status.UNSOLVED" | translate
					}}</mat-option>
					<mat-option [value]="statusEnum.ATTEMPTED">{{
						"Enum.Status.ATTEMPTED" | translate
					}}</mat-option>
					<mat-option [value]="statusEnum.SOLVED">{{
						"Enum.Status.SOLVED" | translate
					}}</mat-option>
				</mat-select>
			</mat-form-field>

			<mat-form-field>
				<mat-label>{{ "Property.Problem.Difficulty" | translate }}</mat-label>
				<mat-select
					multiple
					[(ngModel)]="filter.difficulties"
					(ngModelChange)="filterSubject.next()"
				>
					<mat-option [value]="difficultyEnum.EASY">{{
						"Enum.Difficulty.EASY" | translate
					}}</mat-option>
					<mat-option [value]="difficultyEnum.MEDIUM">{{
						"Enum.Difficulty.MEDIUM" | translate
					}}</mat-option>
					<mat-option [value]="difficultyEnum.HARD">{{
						"Enum.Difficulty.HARD" | translate
					}}</mat-option>
				</mat-select>
			</mat-form-field>

			<app-category-selector></app-category-selector>
		</div>

		<div>
			<table class="full-width" mat-table [dataSource]="dataSource$ | async">
				<div matColumnDef="creationDate">
					<th class="date-column" mat-header-cell *matHeaderCellDef>
						{{ "Common.Date" | translate }}
					</th>
					<td class="date-column" mat-cell *matCellDef="let row">
						{{ row.creationDate | date: "dd.MM.yyyy" }}
					</td>
				</div>

				<div matColumnDef="status">
					<th class="status-column" mat-header-cell *matHeaderCellDef>Status</th>
					<td class="status-column" mat-cell *matCellDef="let row">
						<mat-icon class="text-green">check_circle</mat-icon>
					</td>
				</div>

				<ng-container matColumnDef="title">
					<th class="title-column" mat-header-cell *matHeaderCellDef>
						{{ "Property.Problem.Title" | translate }}
					</th>
					<td class="title-column" mat-cell *matCellDef="let row">
						<a [routerLink]="[row.id]">{{ row.title }}</a>
					</td>
				</ng-container>

				<ng-container matColumnDef="difficulty">
					<th class="difficulty-column" mat-header-cell *matHeaderCellDef>
						{{ "Property.Problem.Difficulty" | translate }}
					</th>
					<td mat-cell *matCellDef="let row">
						<mat-chip-list>
							<mat-chip selected [class]="'chip-' + row.difficulty">{{
								"Enum.Difficulty." + row.difficulty | translate
							}}</mat-chip>
						</mat-chip-list>
					</td>
				</ng-container>

				<ng-container matColumnDef="categories">
					<th mat-header-cell *matHeaderCellDef>
						{{ "Property.Problem.Categories" | translate }}
					</th>
					<td mat-cell *matCellDef="let row">
						<mat-chip-list>
							<mat-chip *ngFor="let category of row.categories">
								{{ category }}
							</mat-chip>
						</mat-chip-list>
						<span> </span>
					</td>
				</ng-container>

				<ng-container matColumnDef="spacer">
					<th mat-header-cell *matHeaderCellDef></th>
					<td mat-cell *matCellDef="let row"></td>
				</ng-container>

				<tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
				<tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
			</table>

			<app-paginator (onPageChanged)="loadProblems(true)"></app-paginator>
		</div>
	</div>
</div>
