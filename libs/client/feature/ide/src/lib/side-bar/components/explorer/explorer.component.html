<div class="explorer">
	<kling-side-bar-header>
		<ng-container headerTitle>Explorer</ng-container>
		<ng-container headerMenu>
			<mat-menu #menu>
				<button mat-menu-item (click)="createNewProject()" data-test="newProjectBtn">
					{{ "Action.Custom.CreateNewProject" | translate }}
				</button>
				<button
					mat-menu-item
					(click)="saveAsNewProject()"
					data-test="save-as-new-project-btn"
				>
					{{ "Action.Custom.SaveAsNewProject" | translate }}
				</button>
				<button mat-menu-item (click)="exportToDisk()">
					{{ "Action.Export" | translate }}
				</button>
			</mat-menu>

			<div class="px-2">
				<button
					class="w-5 rounded hover:bg-[#a1a1a141]"
					[matMenuTriggerFor]="menu"
					data-test="explorer-menu-btn"
				>
					<kling-icon name="more" size="16"></kling-icon>
				</button>
			</div>
		</ng-container>
	</kling-side-bar-header>

	<div class="sections">
		<!-- Project (File Explorer) -->
		<kling-side-bar-section class="h-full">
			<ng-container sectionTitle
				><span data-test="projectName">{{
					(workspace$ | async)?.projectName
				}}</span></ng-container
			>

			<ng-container sectionActions>
				<div class="flex gap-1 pr-1">
					<button
						class="rounded hover:bg-[#a1a1a141]"
						matTooltip="New File"
						(click)="workspaceDialogs.openCreateFileDialog()"
						data-test="add-file-btn"
					>
						<kling-icon
							name="new-file"
							size="16"
							class="mt-[-16px] icon-light"
						></kling-icon>
					</button>
					<button
						class="rounded hover:bg-[#a1a1a141]"
						matTooltip="New Folder"
						(click)="workspaceDialogs.openCreateDirectoryDialog()"
						data-test="add-directory-btn"
					>
						<kling-icon
							name="new-folder"
							size="16"
							class="mt-[-4px] icon-light"
						></kling-icon>
					</button>
				</div>
			</ng-container>

			<ng-container sectionContent>
				<kling-file-explorer></kling-file-explorer>
			</ng-container>
		</kling-side-bar-section>

		<!-- Settings -->
		<kling-side-bar-section>
			<ng-container sectionTitle>{{ "Common.Settings" | translate }}</ng-container>
			<ng-container sectionContent>
				<kling-workspace-settings></kling-workspace-settings>
			</ng-container>
		</kling-side-bar-section>
	</div>
</div>
